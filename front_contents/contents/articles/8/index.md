---
description: 'かたおかです。 いわゆるFOUCってやつですか。 よくわかってないですが初期レンダリングまでにCSSが読み込まれてないせいでリロード後一瞬だけページ表示が崩れてしまいます。
  このサイトもリロードするとちらちらして鬱陶しいのでどうにか直せないか試行錯誤してみます。  ## 試行錯誤１ - _document.tsxを作る `_document.tsx`を作ってみます。
  サーバサイドとクライアントサイ...'
posted_at: 2022年06月28日 11時17分
slug: '8'
tag_ids:
- 4263726428
- 4263728284
- 4263728970
title: Next.js + MUIで画面がちらつく（FOUC問題）
updated_at: 2022年06月28日 11時31分

---
かたおかです。
いわゆるFOUCってやつですか。
よくわかってないですが初期レンダリングまでにCSSが読み込まれてないせいでリロード後一瞬だけページ表示が崩れてしまいます。
このサイトもリロードするとちらちらして鬱陶しいのでどうにか直せないか試行錯誤してみます。

## 試行錯誤１ - _document.tsxを作る
`_document.tsx`を作ってみます。
サーバサイドとクライアントサイドでclass nameが違うことが原因である可能性があるらしいです。
このサイトがSSRしているかは疑問なのですが試してみます。
<br/>

-> 結果
なんか若干良くなった気はする……？
ただまだちらつきはする
Swiperとか使っててJSが重いページの方が症状は重そう
逆に記事ページみたいなSwiper使ってないページはちらつきにくくなった
こっからどうすりゃいいんだー？

## 試行錯誤２ - コンポーネントを読み込み完了するまで非表示する

https://qiita.com/cawauchi/items/165f71cf67e90279a5d7

↑のサイトを参考にした。
`useEffect`が呼ばれるまでコンポーネントを表示しないので（おそらく）崩れることはなくなるはず。
欠点としては読み込みが遅いページだと画面の初期表示まで時間がかかることかな？
ちらつくよりは全然いいので試してみる！
